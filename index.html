<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POC - Plataforma SENAI TEDs</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .container {
            width: 95%;
            max-width: 1200px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            min-height: 90vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: linear-gradient(135deg, #FF6B35 0%, #F7931E 100%);
            color: white;
            padding: 20px 30px;
            text-align: center;
            position: relative;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .main-content {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        .sidebar {
            width: 300px;
            background: #f8f9fa;
            border-right: 1px solid #e9ecef;
            padding: 20px;
            overflow-y: auto;
        }

        .content-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .step-indicator {
            background: white;
            padding: 15px 30px;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .step {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .step.active {
            background: #FF6B35;
            color: white;
        }

        .step.completed {
            background: #28a745;
            color: white;
        }

        .step.inactive {
            background: #e9ecef;
            color: #6c757d;
        }

        .main-area {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
        }

        .login-screen, .course-selection, .uc-selection, .capacidades-selection, 
        .situacoes-selection, .estrategias-selection, .chat-interface, .document-generation {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .login-screen.active, .course-selection.active, .uc-selection.active, 
        .capacidades-selection.active, .situacoes-selection.active, 
        .estrategias-selection.active, .chat-interface.active, .document-generation.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .form-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #FF6B35;
        }

        .btn {
            background: linear-gradient(135deg, #FF6B35 0%, #F7931E 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-block;
            text-decoration: none;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 53, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
        }

        .card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .card h3 {
            color: #FF6B35;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .checkbox-item:hover {
            border-color: #FF6B35;
            background: #fff8f6;
        }

        .checkbox-item input[type="checkbox"] {
            width: auto;
            margin-right: 10px;
        }

        .checkbox-item.selected {
            border-color: #FF6B35;
            background: #fff8f6;
        }

        .chat-container {
            display: flex;
            flex-direction: column;
            height: 600px;
            border: 1px solid #e9ecef;
            border-radius: 12px;
            overflow: hidden;
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: #f8f9fa;
        }

        .message {
            margin-bottom: 15px;
            display: flex;
            gap: 10px;
        }

        .message.user {
            justify-content: flex-end;
        }

        .message.user .message-content {
            background: #FF6B35;
            color: white;
        }

        .message.ai .message-content {
            background: white;
            color: #333;
            border: 1px solid #e9ecef;
        }

        .message-content {
            max-width: 70%;
            padding: 12px 16px;
            border-radius: 12px;
            word-wrap: break-word;
        }

        .chat-input-area {
            padding: 15px;
            background: white;
            border-top: 1px solid #e9ecef;
            display: flex;
            gap: 10px;
        }

        .chat-input {
            flex: 1;
            margin: 0;
        }

        .progress-sidebar {
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .progress-item {
            display: flex;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #e9ecef;
        }

        .progress-item:last-child {
            border-bottom: none;
        }

        .progress-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.8rem;
        }

        .progress-icon.completed {
            background: #28a745;
            color: white;
        }

        .progress-icon.active {
            background: #FF6B35;
            color: white;
        }

        .progress-icon.pending {
            background: #e9ecef;
            color: #6c757d;
        }

        .document-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .document-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .document-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .document-card h4 {
            color: #FF6B35;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .document-card p {
            color: #6c757d;
            margin-bottom: 15px;
            font-size: 0.9rem;
        }

        .document-actions {
            display: flex;
            gap: 10px;
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 0.8rem;
        }

        .success-message {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            margin-bottom: 20px;
        }

        .course-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .course-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .course-card:hover, .course-card.selected {
            border-color: #FF6B35;
            background: #fff8f6;
            transform: translateY(-3px);
        }

        .course-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #FF6B35 0%, #F7931E 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                max-height: 200px;
            }
            
            .step-indicator {
                flex-wrap: wrap;
                gap: 10px;
            }
            
            .step {
                font-size: 0.8rem;
                padding: 6px 12px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>🎓 Plataforma SENAI TEDs</h1>
            <p>Sistema Inteligente de Geração de Documentos Educacionais - POC</p>
        </header>

        <div class="main-content">
            <aside class="sidebar">
                <div class="progress-sidebar">
                    <h4 style="margin-bottom: 20px; color: #FF6B35;">Progresso</h4>
                    <div class="progress-item">
                        <div class="progress-icon completed" id="progress-1">✓</div>
                        <div>
                            <strong>Login</strong>
                            <div style="font-size: 0.8rem; color: #6c757d;">Acesso ao sistema</div>
                        </div>
                    </div>
                    <div class="progress-item">
                        <div class="progress-icon active" id="progress-2">2</div>
                        <div>
                            <strong>Curso</strong>
                            <div style="font-size: 0.8rem; color: #6c757d;">Seleção do curso técnico</div>
                        </div>
                    </div>
                    <div class="progress-item">
                        <div class="progress-icon pending" id="progress-3">3</div>
                        <div>
                            <strong>UC</strong>
                            <div style="font-size: 0.8rem; color: #6c757d;">Unidades Curriculares</div>
                        </div>
                    </div>
                    <div class="progress-item">
                        <div class="progress-icon pending" id="progress-4">4</div>
                        <div>
                            <strong>Capacidades</strong>
                            <div style="font-size: 0.8rem; color: #6c757d;">Técnicas e socioemocionais</div>
                        </div>
                    </div>
                    <div class="progress-item">
                        <div class="progress-icon pending" id="progress-5">5</div>
                        <div>
                            <strong>Situações</strong>
                            <div style="font-size: 0.8rem; color: #6c757d;">Situações de aprendizagem</div>
                        </div>
                    </div>
                    <div class="progress-item">
                        <div class="progress-icon pending" id="progress-6">6</div>
                        <div>
                            <strong>Estratégias</strong>
                            <div style="font-size: 0.8rem; color: #6c757d;">Metodologias de ensino</div>
                        </div>
                    </div>
                    <div class="progress-item">
                        <div class="progress-icon pending" id="progress-7">7</div>
                        <div>
                            <strong>Chat IA</strong>
                            <div style="font-size: 0.8rem; color: #6c757d;">Assistente pedagógico</div>
                        </div>
                    </div>
                    <div class="progress-item">
                        <div class="progress-icon pending" id="progress-8">8</div>
                        <div>
                            <strong>Documentos</strong>
                            <div style="font-size: 0.8rem; color: #6c757d;">Geração automática</div>
                        </div>
                    </div>
                </div>

                <div style="background: white; padding: 15px; border-radius: 12px; text-align: center;">
                    <h4 style="color: #FF6B35; margin-bottom: 10px;">POC - Validação</h4>
                    <p style="font-size: 0.8rem; color: #6c757d; margin-bottom: 15px;">
                        30-45 dias para comprovar a geração automática de documentos pedagógicos padronizados
                    </p>
                    <div style="background: #f8f9fa; padding: 10px; border-radius: 8px;">
                        <strong style="color: #28a745;">Metodologia SENAI</strong>
                        <br>
                        <small>Situações de Aprendizagem</small>
                    </div>
                </div>
            </aside>

            <div class="content-area">
                <div class="step-indicator">
                    <div class="step completed" id="step-1">✓ Login</div>
                    <div class="step active" id="step-2">2. Curso</div>
                    <div class="step inactive" id="step-3">3. UC</div>
                    <div class="step inactive" id="step-4">4. Capacidades</div>
                    <div class="step inactive" id="step-5">5. Situações</div>
                    <div class="step inactive" id="step-6">6. Estratégias</div>
                    <div class="step inactive" id="step-7">7. IA Chat</div>
                    <div class="step inactive" id="step-8">8. Documentos</div>
                </div>

                <div class="main-area">
                    <!-- Tela de Login -->
                    <div class="login-screen" id="login-screen">
                        <div class="card">
                            <h3>🔐 Acesso ao Sistema</h3>
                            <div class="form-group">
                                <label for="email">E-mail Institucional:</label>
                                <input type="email" id="email" placeholder="professor@senai.br" value="felipe.professor@senai.br">
                            </div>
                            <div class="form-group">
                                <label for="password">Senha:</label>
                                <input type="password" id="password" placeholder="Digite sua senha" value="demo123">
                            </div>
                            <div class="form-group">
                                <label for="unidade">Unidade SENAI:</label>
                                <select id="unidade">
                                    <option value="celso-charuri">Celso Charuri - Curitiba (Piloto)</option>
                                    <option value="outras">Outras unidades (Em desenvolvimento)</option>
                                </select>
                            </div>
                            <button class="btn" onclick="login()">Entrar no Sistema</button>
                        </div>
                    </div>

                    <!-- Seleção de Curso -->
                    <div class="course-selection active" id="course-selection">
                        <div class="card">
                            <h3>📚 Selecione o Curso Técnico</h3>
                            <p>Escolha o curso para o qual você irá criar os documentos pedagógicos:</p>
                            
                            <div class="course-grid">
                                <div class="course-card" onclick="selectCourse('informatica')" data-course="informatica">
                                    <div class="course-icon">💻</div>
                                    <h4>Técnico em Informática</h4>
                                    <p>Desenvolvimento de sistemas, redes e suporte técnico</p>
                                    <small>1200h • 18 UCs</small>
                                </div>
                                
                                <div class="course-card" onclick="selectCourse('eletronica')" data-course="eletronica">
                                    <div class="course-icon">⚡</div>
                                    <h4>Técnico em Eletrônica</h4>
                                    <p>Circuitos, automação e sistemas eletrônicos</p>
                                    <small>1000h • 15 UCs</small>
                                </div>
                                
                                <div class="course-card" onclick="selectCourse('mecanica')" data-course="mecanica">
                                    <div class="course-icon">⚙️</div>
                                    <h4>Técnico em Mecânica</h4>
                                    <p>Usinagem, soldagem e manutenção industrial</p>
                                    <small>1200h • 16 UCs</small>
                                </div>
                                
                                <div class="course-card" onclick="selectCourse('quimica')" data-course="quimica">
                                    <div class="course-icon">🧪</div>
                                    <h4>Técnico em Química</h4>
                                    <p>Processos químicos e controle de qualidade</p>
                                    <small>1200h • 17 UCs</small>
                                </div>
                            </div>
                            
                            <div style="margin-top: 30px; text-align: center;">
                                <button class="btn" onclick="nextStep(3)" id="course-next-btn" style="display: none;">
                                    Continuar para UCs →
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Seleção de UC -->
                    <div class="uc-selection" id="uc-selection">
                        <div class="card">
                            <h3>📋 Unidades Curriculares (UCs)</h3>
                            <p>Selecione a Unidade Curricular para criar a Situação de Aprendizagem:</p>
                            
                            <div class="form-group">
                                <label for="uc-select">Unidade Curricular:</label>
                                <select id="uc-select" onchange="selectUC()">
                                    <option value="">Selecione uma UC...</option>
                                    <option value="uc1">Fundamentos de Programação - 80h</option>
                                    <option value="uc2">Desenvolvimento Web - 60h</option>
                                    <option value="uc3">Banco de Dados - 60h</option>
                                    <option value="uc4">Redes de Computadores - 80h</option>
                                    <option value="uc5">Sistemas Operacionais - 40h</option>
                                </select>
                            </div>
                            
                            <div id="uc-details" style="display: none;">
                                <div class="card" style="background: #f8f9fa;">
                                    <h4>Detalhes da UC Selecionada:</h4>
                                    <div id="uc-info">
                                        <p><strong>Nome:</strong> <span id="uc-name"></span></p>
                                        <p><strong>Carga Horária:</strong> <span id="uc-hours"></span></p>
                                        <p><strong>Função:</strong> <span id="uc-function"></span></p>
                                        <p><strong>Objetivos:</strong> <span id="uc-objectives"></span></p>
                                    </div>
                                </div>
                            </div>
                            
                            <div style="margin-top: 30px;">
                                <button class="btn btn-secondary" onclick="previousStep(2)">← Voltar</button>
                                <button class="btn" onclick="nextStep(4)" id="uc-next-btn" style="display: none;">
                                    Continuar para Capacidades →
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Seleção de Capacidades -->
                    <div class="capacidades-selection" id="capacidades-selection">
                        <div class="card">
                            <h3>🎯 Capacidades e Conhecimentos</h3>
                            <p>Selecione as capacidades que serão trabalhadas na Situação de Aprendizagem:</p>
                            
                            <div class="card" style="background: #f8f9fa;">
                                <h4>Capacidades Técnicas (Essenciais)</h4>
                                <div class="checkbox-group">
                                    <div class="checkbox-item" onclick="toggleCapacidade(this)">
                                        <input type="checkbox" id="cap-tec-1">
                                        <label for="cap-tec-1">Desenvolver algoritmos estruturados</label>
                                    </div>
                                    <div class="checkbox-item" onclick="toggleCapacidade(this)">
                                        <input type="checkbox" id="cap-tec-2">
                                        <label for="cap-tec-2">Implementar estruturas de dados</label>
                                    </div>
                                    <div class="checkbox-item" onclick="toggleCapacidade(this)">
                                        <input type="checkbox" id="cap-tec-3">
                                        <label for="cap-tec-3">Aplicar conceitos de orientação a objetos</label>
                                    </div>
                                    <div class="checkbox-item" onclick="toggleCapacidade(this)">
                                        <input type="checkbox" id="cap-tec-4">
                                        <label for="cap-tec-4">Utilizar linguagens de programação</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card" style="background: #f0f8ff;">
                                <h4>Capacidades Básicas (Complementares)</h4>
                                <div class="checkbox-group">
                                    <div class="checkbox-item" onclick="toggleCapacidade(this)">
                                        <input type="checkbox" id="cap-bas-1">
                                        <label for="cap-bas-1">Comunicar-se de forma clara e objetiva</label>
                                    </div>
                                    <div class="checkbox-item" onclick="toggleCapacidade(this)">
                                        <input type="checkbox" id="cap-bas-2">
                                        <label for="cap-bas-2">Interpretar textos técnicos</label>
                                    </div>
                                    <div class="checkbox-item" onclick="toggleCapacidade(this)">
                                        <input type="checkbox" id="cap-bas-3">
                                        <label for="cap-bas-3">Aplicar raciocínio lógico-matemático</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card" style="background: #fff0f5;">
                                <h4>Capacidades Socioemocionais</h4>
                                <div class="checkbox-group">
                                    <div class="checkbox-item" onclick="toggleCapacidade(this)">
                                        <input type="checkbox" id="cap-soc-1">
                                        <label for="cap-soc-1">Demonstrar proatividade</label>
                                    </div>
                                    <div class="checkbox-item" onclick="toggleCapacidade(this)">
                                        <input type="checkbox" id="cap-soc-2">
                                        <label for="cap-soc-2">Trabalhar em equipe</label>
                                    </div>
                                    <div class="checkbox-item" onclick="toggleCapacidade(this)">
                                        <input type="checkbox" id="cap-soc-3">
                                        <label for="cap-soc-3">Demonstrar pensamento crítico</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div style="margin-top: 30px;">
                                <button class="btn btn-secondary" onclick="previousStep(3)">← Voltar</button>
                                <button class="btn" onclick="nextStep(5)" id="cap-next-btn">
                                    Continuar para Situações →
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Definição de Situações de Aprendizagem -->
                    <div class="situacoes-selection" id="situacoes-selection">
                        <div class="card">
                            <h3>🎲 Situações de Aprendizagem</h3>
                            <p>Defina as situações de aprendizagem para a UC selecionada:</p>
                            
                            <div class="form-group">
                                <label for="num-situacoes">Número de Situações de Aprendizagem:</label>
                                <select id="num-situacoes" onchange="createSituacoes()">
                                    <option value="">Selecione...</option>
                                    <option value="1">1 Situação (UC completa)</option>
                                    <option value="2">2 Situações (UC dividida)</option>
                                    <option value="3">3 Situações (UC segmentada)</option>
                                    <option value="complementar">Apenas Complementar</option>
                                </select>
                            </div>
                            
                            <div id="situacoes-container" style="display: none;">
                                <!-- Situações serão criadas dinamicamente aqui -->
                            </div>
                            
                            <div style="margin-top: 30px;">
                                <button class="btn btn-secondary" onclick="previousStep(4)">← Voltar</button>
                                <button class="btn" onclick="nextStep(6)" id="sit-next-btn" style="display: none;">
                                    Continuar para Estratégias →
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Seleção de Estratégias -->
                    <div class="estrategias-selection" id="estrategias-selection">
                        <div class="card">
                            <h3>🎯 Estratégias de Ensino e Aprendizagem</h3>
                            <p>Selecione as estratégias pedagógicas para cada situação de aprendizagem:</p>
                            
                            <div class="card" style="background: #f8f9fa;">
                                <h4>Estratégias de Aprendizagem</h4>
                                <p style="color: #6c757d; font-size: 0.9rem;">Escolha pelo menos uma estratégia:</p>
                                <div class="checkbox-group">
                                    <div class="checkbox-item" onclick="toggleEstrategia(this)">
                                        <input type="checkbox" id="est-apr-1">
                                        <label for="est-apr-1">Estudo de Caso</label>
                                    </div>
                                    <div class="checkbox-item" onclick="toggleEstrategia(this)">
                                        <input type="checkbox" id="est-apr-2">
                                        <label for="est-apr-2">Projeto Integrador</label>
                                    </div>
                                    <div class="checkbox-item" onclick="toggleEstrategia(this)">
                                        <input type="checkbox" id="est-apr-3">
                                        <label for="est-apr-3">Pesquisa Aplicada</label>
                                    </div>
                                    <div class="checkbox-item" onclick="toggleEstrategia(this)">
                                        <input type="checkbox" id="est-apr-4">
                                        <label for="est-apr-4">Situação-Problema</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card" style="background: #f0f8ff;">
                                <h4>Estratégias de Ensino</h4>
                                <p style="color: #6c757d; font-size: 0.9rem;">Para blocos de 4 horas (padrão SENAI-PR):</p>
                                <div class="checkbox-group">
                                    <div class="checkbox-item" onclick="toggleEstrategia(this)">
                                        <input type="checkbox" id="est-ens-1">
                                        <label for="est-ens-1">Sala de Aula Invertida</label>
                                    </div>
                                    <div class="checkbox-item" onclick="toggleEstrategia(this)">
                                        <input type="checkbox" id="est-ens-2">
                                        <label for="est-ens-2">Gamificação</label>
                                    </div>
                                    <div class="checkbox-item" onclick="toggleEstrategia(this)">
                                        <input type="checkbox" id="est-ens-3">
                                        <label for="est-ens-3">Rotação por Estações</label>
                                    </div>
                                    <div class="checkbox-item" onclick="toggleEstrategia(this)">
                                        <input type="checkbox" id="est-ens-4">
                                        <label for="est-ens-4">Design Thinking</label>
                                    </div>
                                    <div class="checkbox-item" onclick="toggleEstrategia(this)">
                                        <input type="checkbox" id="est-ens-5">
                                        <label for="est-ens-5">Aprendizagem Experiencial</label>
                                    </div>
                                    <div class="checkbox-item" onclick="toggleEstrategia(this)">
                                        <input type="checkbox" id="est-ens-6">
                                        <label for="est-ens-6">Instrução pelos Pares</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card" style="background: #fff8f0;">
                                <h4>Tipo de Aula</h4>
                                <div class="checkbox-group">
                                    <div class="checkbox-item" onclick="toggleEstrategia(this)">
                                        <input type="checkbox" id="tipo-1">
                                        <label for="tipo-1">Teórica</label>
                                    </div>
                                    <div class="checkbox-item" onclick="toggleEstrategia(this)">
                                        <input type="checkbox" id="tipo-2">
                                        <label for="tipo-2">Dispositiva</label>
                                    </div>
                                    <div class="checkbox-item" onclick="toggleEstrategia(this)">
                                        <input type="checkbox" id="tipo-3">
                                        <label for="tipo-3">Visita Técnica</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div style="margin-top: 30px;">
                                <button class="btn btn-secondary" onclick="previousStep(5)">← Voltar</button>
                                <button class="btn" onclick="nextStep(7)" id="est-next-btn">
                                    Continuar para Chat IA →
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Interface de Chat com IA -->
                    <div class="chat-interface" id="chat-interface">
                        <div class="card">
                            <h3>🤖 Assistente Pedagógico IA</h3>
                            <p>Converse com o assistente para refinar e personalizar seus documentos pedagógicos:</p>
                            
                            <div class="chat-container">
                                <div class="chat-messages" id="chat-messages">
                                    <div class="message ai">
                                        <div class="message-content">
                                            Olá! Sou seu assistente pedagógico especializado na metodologia SENAI. 
                                            Vou ajudar você a criar documentos educacionais alinhados às diretrizes institucionais.
                                            <br><br>
                                            Com base nas suas seleções:
                                            <ul style="margin: 10px 0;">
                                                <li><strong>Curso:</strong> <span id="chat-curso">Técnico em Informática</span></li>
                                                <li><strong>UC:</strong> <span id="chat-uc">Fundamentos de Programação</span></li>
                                                <li><strong>Capacidades:</strong> <span id="chat-capacidades">4 selecionadas</span></li>
                                                <li><strong>Situações:</strong> <span id="chat-situacoes">2 situações</span></li>
                                            </ul>
                                            O que gostaria de ajustar ou discutir sobre seus planos de aula?
                                        </div>
                                    </div>
                                </div>
                                <div class="chat-input-area">
                                    <input type="text" class="chat-input" id="chat-input" 
                                           placeholder="Digite sua mensagem..." 
                                           onkeypress="handleEnter(event)">
                                    <button class="btn" onclick="sendMessage()">Enviar</button>
                                </div>
                            </div>
                            
                            <div style="margin-top: 20px; display: flex; gap: 10px; flex-wrap: wrap;">
                                <button class="btn btn-small" onclick="quickMessage('Como posso adaptar para alunos com dificuldades?')">
                                    Adaptações para Dificuldades
                                </button>
                                <button class="btn btn-small" onclick="quickMessage('Quais recursos tecnológicos posso usar?')">
                                    Recursos Tecnológicos
                                </button>
                                <button class="btn btn-small" onclick="quickMessage('Como avaliar as capacidades socioemocionais?')">
                                    Avaliação Socioemocional
                                </button>
                                <button class="btn btn-small" onclick="quickMessage('Preciso de mais atividades práticas')">
                                    Atividades Práticas
                                </button>
                            </div>
                            
                            <div style="margin-top: 30px;">
                                <button class="btn btn-secondary" onclick="previousStep(6)">← Voltar</button>
                                <button class="btn" onclick="nextStep(8)">
                                    Gerar Documentos →
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Geração de Documentos -->
                    <div class="document-generation" id="document-generation">
                        <div class="success-message">
                            <h3>✅ Documentos Gerados com Sucesso!</h3>
                            <p>Todos os documentos foram criados seguindo a metodologia SENAI e estão prontos para uso.</p>
                        </div>
                        
                        <div class="card">
                            <h3>📄 Documentos Gerados</h3>
                            <p>Os seguintes documentos foram automaticamente criados e estão disponíveis para download:</p>
                            
                            <div class="document-list">
                                <div class="document-card">
                                    <h4>📋 Situação de Aprendizagem (SA)</h4>
                                    <p>Documento estruturado com contextualização, desafio, objetivos, etapas e resultados esperados.</p>
                                    <div class="document-actions">
                                        <button class="btn btn-small" onclick="previewDocument('SA')">Visualizar</button>
                                        <button class="btn btn-small btn-secondary" onclick="downloadDocument('SA')">Download Word</button>
                                    </div>
                                </div>
                                
                                <div class="document-card">
                                    <h4>📚 PEUC - Plano de Ensino da UC</h4>
                                    <p>Plano completo da Unidade Curricular com todas as situações de aprendizagem organizadas.</p>
                                    <div class="document-actions">
                                        <button class="btn btn-small" onclick="previewDocument('PEUC')">Visualizar</button>
                                        <button class="btn btn-small btn-secondary" onclick="downloadDocument('PEUC')">Download Word</button>
                                    </div>
                                </div>
                                
                                <div class="document-card">
                                    <h4>📝 Planos de Aula Detalhados</h4>
                                    <p>Planos de aula estruturados para cada situação de aprendizagem com estratégias e recursos.</p>
                                    <div class="document-actions">
                                        <button class="btn btn-small" onclick="previewDocument('Planos')">Visualizar</button>
                                        <button class="btn btn-small btn-secondary" onclick="downloadDocument('Planos')">Download Word</button>
                                    </div>
                                </div>
                                
                                <div class="document-card">
                                    <h4>🎯 Apresentação PowerPoint</h4>
                                    <p>Slides estruturados para apoio às aulas com conteúdo visual e interativo.</p>
                                    <div class="document-actions">
                                        <button class="btn btn-small" onclick="previewDocument('PPT')">Visualizar</button>
                                        <button class="btn btn-small btn-secondary" onclick="downloadDocument('PPT')">Download PPT</button>
                                    </div>
                                </div>
                                
                                <div class="document-card">
                                    <h4>📖 Material de Apoio (PDF)</h4>
                                    <p>Textos complementares, exercícios e recursos adicionais para os estudantes.</p>
                                    <div class="document-actions">
                                        <button class="btn btn-small" onclick="previewDocument('PDF')">Visualizar</button>
                                        <button class="btn btn-small btn-secondary" onclick="downloadDocument('PDF')">Download PDF</button>
                                    </div>
                                </div>
                                
                                <div class="document-card">
                                    <h4>🌐 Página HTML Interativa</h4>
                                    <p>Conteúdo digital interativo para uso em ambiente virtual de aprendizagem.</p>
                                    <div class="document-actions">
                                        <button class="btn btn-small" onclick="previewDocument('HTML')">Visualizar</button>
                                        <button class="btn btn-small btn-secondary" onclick="downloadDocument('HTML')">Download HTML</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <h3>📊 Rastreabilidade e Indicadores</h3>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 20px 0;">
                                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; text-align: center;">
                                    <h4 style="color: #FF6B35;">4</h4>
                                    <small>Capacidades Técnicas</small>
                                </div>
                                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; text-align: center;">
                                    <h4 style="color: #FF6B35;">3</h4>
                                    <small>Capacidades Básicas</small>
                                </div>
                                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; text-align: center;">
                                    <h4 style="color: #FF6B35;">3</h4>
                                    <small>Capacidades Socioemocionais</small>
                                </div>
                                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; text-align: center;">
                                    <h4 style="color: #FF6B35;">6</h4>
                                    <small>Estratégias de Ensino</small>
                                </div>
                            </div>
                            <p style="color: #6c757d; font-size: 0.9rem;">
                                ✅ Todos os dados foram registrados no banco de dados para alimentação dos indicadores SENAI
                                <br>
                                ✅ Documentos seguem rigorosamente a metodologia de situações de aprendizagem
                                <br>
                                ✅ Rastreabilidade completa para auditoria e relatórios de KPI
                            </p>
                        </div>
                        
                        <div style="text-align: center; margin-top: 30px;">
                            <button class="btn" onclick="restartProcess()" style="margin-right: 15px;">
                                🔄 Criar Novo Documento
                            </button>
                            <button class="btn btn-secondary" onclick="sendForApproval()">
                                📤 Enviar para Validação Pedagógica
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script>
        let currentStep = 2;
        let selectedCourse = '';
        let selectedUC = '';
        let chatHistory = [];
        
        // Dados coletados durante o processo
        let projectData = {
            professor: 'Felipe Professor',
            unidade: 'Celso Charuri - Curitiba',
            curso: '',
            uc: {
                nome: '',
                cargaHoraria: 0,
                funcao: '',
                objetivos: ''
            },
            capacidades: {
                tecnicas: [],
                basicas: [],
                socioemocionais: []
            },
            situacoes: [],
            estrategias: {
                aprendizagem: [],
                ensino: [],
                tipoAula: []
            },
            chatInteractions: []
        };

        // Função de login (simulada)
        function login() {
            updateProgress(1, 'completed');
            updateProgress(2, 'active');
            showStep(2);
        }

        // Navegação entre etapas
        function showStep(step) {
            // Esconder todas as telas
            document.querySelectorAll('.login-screen, .course-selection, .uc-selection, .capacidades-selection, .situacoes-selection, .estrategias-selection, .chat-interface, .document-generation').forEach(el => {
                el.classList.remove('active');
            });

            // Mostrar tela atual
            switch(step) {
                case 1: document.getElementById('login-screen').classList.add('active'); break;
                case 2: document.getElementById('course-selection').classList.add('active'); break;
                case 3: document.getElementById('uc-selection').classList.add('active'); break;
                case 4: document.getElementById('capacidades-selection').classList.add('active'); break;
                case 5: document.getElementById('situacoes-selection').classList.add('active'); break;
                case 6: document.getElementById('estrategias-selection').classList.add('active'); break;
                case 7: document.getElementById('chat-interface').classList.add('active'); break;
                case 8: document.getElementById('document-generation').classList.add('active'); break;
            }

            currentStep = step;
            updateStepIndicator(step);
        }

        function nextStep(step) {
            updateProgress(currentStep, 'completed');
            updateProgress(step, 'active');
            showStep(step);
        }

        function previousStep(step) {
            updateProgress(currentStep, 'pending');
            updateProgress(step, 'active');
            showStep(step);
        }

        function updateStepIndicator(activeStep) {
            for(let i = 1; i <= 8; i++) {
                const stepEl = document.getElementById(`step-${i}`);
                if(i < activeStep) {
                    stepEl.className = 'step completed';
                    stepEl.innerHTML = `✓ ${getStepName(i)}`;
                } else if(i === activeStep) {
                    stepEl.className = 'step active';
                    stepEl.innerHTML = `${i}. ${getStepName(i)}`;
                } else {
                    stepEl.className = 'step inactive';
                    stepEl.innerHTML = `${i}. ${getStepName(i)}`;
                }
            }
        }

        function updateProgress(step, status) {
            const progressEl = document.getElementById(`progress-${step}`);
            progressEl.className = `progress-icon ${status}`;
            if(status === 'completed') {
                progressEl.innerHTML = '✓';
            } else if(status === 'active') {
                progressEl.innerHTML = step;
            } else {
                progressEl.innerHTML = step;
            }
        }

        function getStepName(step) {
            const names = ['Login', 'Curso', 'UC', 'Capacidades', 'Situações', 'Estratégias', 'IA Chat', 'Documentos'];
            return names[step - 1];
        }

        // Seleção de curso
        function selectCourse(courseId) {
            document.querySelectorAll('.course-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            const selectedCard = document.querySelector(`[data-course="${courseId}"]`);
            selectedCard.classList.add('selected');
            selectedCourse = courseId;
            
            // Salvar dados do curso
            const courseNames = {
                'informatica': 'Técnico em Informática',
                'eletronica': 'Técnico em Eletrônica', 
                'mecanica': 'Técnico em Mecânica',
                'quimica': 'Técnico em Química'
            };
            
            projectData.curso = courseNames[courseId];
            
            document.getElementById('course-next-btn').style.display = 'inline-block';
        }

        // Seleção de UC
        function selectUC() {
            const ucSelect = document.getElementById('uc-select');
            if(ucSelect.value) {
                selectedUC = ucSelect.value;
                document.getElementById('uc-details').style.display = 'block';
                document.getElementById('uc-next-btn').style.display = 'inline-block';
                
                // Dados das UCs
                const ucData = {
                    'uc1': {
                        name: 'Fundamentos de Programação',
                        hours: 80,
                        function: 'Desenvolver competências básicas em lógica de programação e estruturação de algoritmos',
                        objectives: 'Capacitar o aluno a criar algoritmos estruturados, implementar soluções computacionais básicas e aplicar conceitos de lógica de programação utilizando diferentes linguagens'
                    },
                    'uc2': {
                        name: 'Desenvolvimento Web',
                        hours: 60,
                        function: 'Desenvolver competências em criação de interfaces web e programação front-end',
                        objectives: 'Capacitar o aluno a criar páginas web responsivas, aplicar conceitos de usabilidade e implementar funcionalidades interativas'
                    },
                    'uc3': {
                        name: 'Banco de Dados',
                        hours: 60,
                        function: 'Desenvolver competências em modelagem e manipulação de dados',
                        objectives: 'Capacitar o aluno a projetar bancos de dados relacionais, criar consultas SQL e implementar sistemas de gerenciamento de dados'
                    }
                };
                
                const uc = ucData[ucSelect.value] || ucData['uc1'];
                
                // Salvar dados da UC
                projectData.uc = {
                    nome: uc.name,
                    cargaHoraria: uc.hours,
                    funcao: uc.function,
                    objetivos: uc.objectives
                };
                
                document.getElementById('uc-name').textContent = uc.name;
                document.getElementById('uc-hours').textContent = uc.hours + ' horas';
                document.getElementById('uc-function').textContent = uc.function;
                document.getElementById('uc-objectives').textContent = uc.objectives;
            }
        }

        // Toggle de capacidades
        function toggleCapacidade(element) {
            const checkbox = element.querySelector('input[type="checkbox"]');
            checkbox.checked = !checkbox.checked;
            element.classList.toggle('selected', checkbox.checked);
            
            // Salvar capacidades selecionadas
            collectCapacidades();
        }
        
        function collectCapacidades() {
            projectData.capacidades = {
                tecnicas: [],
                basicas: [],
                socioemocionais: []
            };
            
            // Capacidades técnicas
            document.querySelectorAll('#capacidades-selection input[id^="cap-tec-"]:checked').forEach(cb => {
                projectData.capacidades.tecnicas.push(cb.nextElementSibling.textContent);
            });
            
            // Capacidades básicas
            document.querySelectorAll('#capacidades-selection input[id^="cap-bas-"]:checked').forEach(cb => {
                projectData.capacidades.basicas.push(cb.nextElementSibling.textContent);
            });
            
            // Capacidades socioemocionais
            document.querySelectorAll('#capacidades-selection input[id^="cap-soc-"]:checked').forEach(cb => {
                projectData.capacidades.socioemocionais.push(cb.nextElementSibling.textContent);
            });
        }

        // Criação de situações de aprendizagem
        function createSituacoes() {
            const numSituacoes = document.getElementById('num-situacoes').value;
            const container = document.getElementById('situacoes-container');
            
            if(numSituacoes) {
                container.style.display = 'block';
                container.innerHTML = '';
                
                // Limpar situações anteriores
                projectData.situacoes = [];
                
                if(numSituacoes === 'complementar') {
                    container.innerHTML = `
                        <div class="card" style="background: #f8f9fa;">
                            <h4>Situação Complementar</h4>
                            <div class="form-group">
                                <label>Título da Situação:</label>
                                <input type="text" id="situacao-titulo-0" placeholder="Ex: Revisão e Aprofundamento em Programação" onchange="updateSituacao(0)">
                            </div>
                            <div class="form-group">
                                <label>Carga Horária:</label>
                                <input type="number" id="situacao-horas-0" placeholder="Ex: 20" style="width: 100px;" onchange="updateSituacao(0)"> horas
                            </div>
                            <div class="form-group">
                                <label>Descrição:</label>
                                <textarea id="situacao-desc-0" rows="3" placeholder="Descreva brevemente esta situação de aprendizagem..." onchange="updateSituacao(0)"></textarea>
                            </div>
                        </div>
                    `;
                    
                    // Inicializar situação complementar
                    projectData.situacoes.push({
                        numero: 0,
                        tipo: 'complementar',
                        titulo: '',
                        cargaHoraria: 20,
                        descricao: ''
                    });
                } else {
                    const numInt = parseInt(numSituacoes);
                    const horasPorSituacao = Math.ceil(projectData.uc.cargaHoraria / numInt);
                    
                    for(let i = 1; i <= numInt; i++) {
                        container.innerHTML += `
                            <div class="card" style="background: #f8f9fa;">
                                <h4>Situação de Aprendizagem ${i}</h4>
                                <div class="form-group">
                                    <label>Título da Situação:</label>
                                    <input type="text" id="situacao-titulo-${i}" placeholder="Ex: Introdução à Lógica de Programação" onchange="updateSituacao(${i})">
                                </div>
                                <div class="form-group">
                                    <label>Carga Horária:</label>
                                    <input type="number" id="situacao-horas-${i}" value="${horasPorSituacao}" style="width: 100px;" onchange="updateSituacao(${i})"> horas
                                </div>
                                <div class="form-group">
                                    <label>Descrição:</label>
                                    <textarea id="situacao-desc-${i}" rows="3" placeholder="Descreva brevemente esta situação de aprendizagem..." onchange="updateSituacao(${i})"></textarea>
                                </div>
                            </div>
                        `;
                        
                        // Inicializar situação
                        projectData.situacoes.push({
                            numero: i,
                            tipo: 'regular',
                            titulo: '',
                            cargaHoraria: horasPorSituacao,
                            descricao: ''
                        });
                    }
                }
                
                document.getElementById('sit-next-btn').style.display = 'inline-block';
            }
        }
        
        function updateSituacao(index) {
            if (projectData.situacoes[index]) {
                projectData.situacoes[index].titulo = document.getElementById(`situacao-titulo-${projectData.situacoes[index].numero}`).value;
                projectData.situacoes[index].cargaHoraria = parseInt(document.getElementById(`situacao-horas-${projectData.situacoes[index].numero}`).value) || 20;
                projectData.situacoes[index].descricao = document.getElementById(`situacao-desc-${projectData.situacoes[index].numero}`).value;
            }
        }

        // Toggle de estratégias
        function toggleEstrategia(element) {
            const checkbox = element.querySelector('input[type="checkbox"]');
            checkbox.checked = !checkbox.checked;
            element.classList.toggle('selected', checkbox.checked);
            
            // Coletar estratégias selecionadas
            collectEstrategias();
        }
        
        function collectEstrategias() {
            projectData.estrategias = {
                aprendizagem: [],
                ensino: [],
                tipoAula: []
            };
            
            // Estratégias de aprendizagem
            document.querySelectorAll('#estrategias-selection input[id^="est-apr-"]:checked').forEach(cb => {
                projectData.estrategias.aprendizagem.push(cb.nextElementSibling.textContent);
            });
            
            // Estratégias de ensino
            document.querySelectorAll('#estrategias-selection input[id^="est-ens-"]:checked').forEach(cb => {
                projectData.estrategias.ensino.push(cb.nextElementSibling.textContent);
            });
            
            // Tipo de aula
            document.querySelectorAll('#estrategias-selection input[id^="tipo-"]:checked').forEach(cb => {
                projectData.estrategias.tipoAula.push(cb.nextElementSibling.textContent);
            });
        }

        // Chat com IA
        function sendMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            
            if(message) {
                addMessage(message, 'user');
                input.value = '';
                
                // Simular resposta da IA
                setTimeout(() => {
                    const aiResponse = generateAIResponse(message);
                    addMessage(aiResponse, 'ai');
                }, 1000);
            }
        }

        function handleEnter(event) {
            if(event.key === 'Enter') {
                sendMessage();
            }
        }

        function quickMessage(message) {
            document.getElementById('chat-input').value = message;
            sendMessage();
        }

        function addMessage(message, type) {
            const messagesContainer = document.getElementById('chat-messages');
            const messageEl = document.createElement('div');
            messageEl.className = `message ${type}`;
            messageEl.innerHTML = `<div class="message-content">${message}</div>`;
            messagesContainer.appendChild(messageEl);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function generateAIResponse(userMessage) {
            const responses = {
                'dificuldades': 'Para alunos com dificuldades, sugiro: 1) Atividades em dupla/trio para apoio mútuo, 2) Material visual com diagramas e exemplos práticos, 3) Exercícios progressivos do simples ao complexo, 4) Feedback individual constante.',
                'tecnológicos': 'Recursos tecnológicos recomendados: 1) IDE de programação (VS Code, DevC++), 2) Simuladores online (Portugol Studio), 3) Plataformas de exercícios (URI, HackerRank), 4) Quadro digital para demonstrações.',
                'socioemocional': 'Para avaliar capacidades socioemocionais: 1) Observação durante trabalhos em grupo, 2) Autoavaliação reflexiva, 3) Portfólio com registros de aprendizagem, 4) Apresentações orais dos projetos.',
                'práticas': 'Atividades práticas sugeridas: 1) Desenvolvimento de mini-projetos, 2) Resolução de problemas reais da comunidade, 3) Criação de jogos simples, 4) Desenvolvimento de aplicativos básicos.'
            };
            
            const lowerMessage = userMessage.toLowerCase();
            
            for(let key in responses) {
                if(lowerMessage.includes(key) || lowerMessage.includes(key.slice(0, -1))) {
                    return responses[key];
                }
            }
            
            return 'Excelente pergunta! Com base na metodologia SENAI e nas capacidades selecionadas, posso ajudar você a adequar o conteúdo. Poderia ser mais específico sobre o que precisa ajustar? Estou aqui para garantir que seus documentos estejam alinhados com as diretrizes pedagógicas.';
        }

        // Funções para gerar documentos reais (versão corrigida)
        function generatePDFContent(docType) {
            let content = '';
            const currentDate = new Date().toLocaleDateString('pt-BR');
            const currentTime = new Date().toLocaleTimeString('pt-BR');
            
            if (docType === 'PDF') {
                // Material de Apoio
                content = `
SENAI - SERVIÇO NACIONAL DE APRENDIZAGEM INDUSTRIAL
================================================================

MATERIAL DE APOIO PEDAGÓGICO

Curso: ${projectData.curso}
UC: ${projectData.uc.nome}
Professor: ${projectData.professor}
Unidade: ${projectData.unidade}
Data: ${currentDate}

================================================================

1. OBJETIVOS DA UNIDADE CURRICULAR

${projectData.uc.objetivos}

================================================================

2. CAPACIDADES A SEREM DESENVOLVIDAS

2.1 Capacidades Técnicas:
${projectData.capacidades.tecnicas.map((cap, index) => `   ${index + 1}. ${cap}`).join('\n')}

2.2 Capacidades Básicas:
${projectData.capacidades.basicas.map((cap, index) => `   ${index + 1}. ${cap}`).join('\n')}

2.3 Capacidades Socioemocionais:
${projectData.capacidades.socioemocionais.map((cap, index) => `   ${index + 1}. ${cap}`).join('\n')}

================================================================

3. SITUAÇÕES DE APRENDIZAGEM

${projectData.situacoes.map((sit, index) => `
3.${index + 1} ${sit.titulo || `Situação de Aprendizagem ${sit.numero}`}
      Carga Horária: ${sit.cargaHoraria} horas
      Descrição: ${sit.descricao || 'Não informada'}
`).join('')}

================================================================

4. ESTRATÉGIAS PEDAGÓGICAS

4.1 Estratégias de Aprendizagem:
${projectData.estrategias.aprendizagem.map(est => `   • ${est}`).join('\n')}

4.2 Estratégias de Ensino:
${projectData.estrategias.ensino.map(est => `   • ${est}`).join('\n')}

4.3 Tipo de Aula:
${projectData.estrategias.tipoAula.map(tipo => `   • ${tipo}`).join('\n')}

================================================================

5. RECURSOS E FERRAMENTAS SUGERIDAS

• Laboratório de informática com computadores individuais
• Softwares de desenvolvimento (IDEs, editores de código)
• Acesso à internet para pesquisas e recursos online
• Projetor para apresentações e demonstrações
• Quadro para explicações conceituais
• Material impresso com exercícios práticos

================================================================

6. ORIENTAÇÕES METODOLÓGICAS

Esta UC deve ser desenvolvida seguindo a metodologia SENAI de 
situações de aprendizagem, priorizando:

• Aprendizagem baseada em problemas reais
• Desenvolvimento de projetos práticos
• Trabalho colaborativo entre alunos
• Avaliação contínua e formativa
• Integração teoria-prática

================================================================

7. CRITÉRIOS DE AVALIAÇÃO

A avaliação deve contemplar:
• Participação nas atividades propostas
• Desenvolvimento dos projetos práticos
• Demonstração das capacidades técnicas
• Aplicação dos conhecimentos em situações reais
• Trabalho em equipe e comunicação

================================================================

Documento gerado automaticamente pela Plataforma SENAI TEDs - POC
Gerado em: ${currentDate} às ${currentTime}
Metodologia: Situações de Aprendizagem SENAI
                `;
                
            } else if (docType === 'SA') {
                // Situação de Aprendizagem
                content = `
SENAI - SERVIÇO NACIONAL DE APRENDIZAGEM INDUSTRIAL
================================================================

SITUAÇÃO DE APRENDIZAGEM

================================================================

IDENTIFICAÇÃO

Curso: ${projectData.curso}
Unidade Curricular: ${projectData.uc.nome}
Carga Horária Total: ${projectData.uc.cargaHoraria} horas
Professor: ${projectData.professor}
Unidade SENAI: ${projectData.unidade}

================================================================

FUNÇÃO

${projectData.uc.funcao}

================================================================

CONTEXTUALIZAÇÃO

${projectData.situacoes.length > 0 && projectData.situacoes[0].descricao ? 
  projectData.situacoes[0].descricao : 
  'Esta situação de aprendizagem visa proporcionar aos alunos uma experiência prática e significativa, conectando os conhecimentos teóricos com situações reais do mundo do trabalho.'
}

================================================================

DESAFIO

${generateDesafioText()}

================================================================

OBJETIVOS

Ao final desta situação de aprendizagem, o aluno deverá ser capaz de:

${projectData.capacidades.tecnicas.map(cap => `• ${cap}`).join('\n')}
${projectData.capacidades.basicas.map(cap => `• ${cap}`).join('\n')}
${projectData.capacidades.socioemocionais.map(cap => `• ${cap}`).join('\n')}

================================================================

ETAPAS DE DESENVOLVIMENTO

${generateEtapas()}

================================================================

RESULTADOS ESPERADOS

• Demonstração prática das capacidades desenvolvidas
• Aplicação dos conhecimentos em situações reais
• Desenvolvimento de competências técnicas e socioemocionais
• Preparação para o mundo do trabalho
• Criação de portfólio de projetos

================================================================

RECURSOS NECESSÁRIOS

• Ambiente adequado para desenvolvimento das atividades
• Ferramentas e equipamentos específicos da área
• Material de apoio e referências técnicas
• Acesso a tecnologias e softwares apropriados
• Acompanhamento pedagógico contínuo

================================================================

Documento gerado automaticamente pela Plataforma SENAI TEDs - POC
Gerado em: ${currentDate} às ${currentTime}
Metodologia: Situações de Aprendizagem SENAI
                `;
                
            } else if (docType === 'PEUC') {
                // PEUC - Plano de Ensino da UC
                content = `
SENAI - SERVIÇO NACIONAL DE APRENDIZAGEM INDUSTRIAL
================================================================

PLANO DE ENSINO DA UNIDADE CURRICULAR (PEUC)

================================================================

1. DADOS GERAIS

Curso: ${projectData.curso}
Unidade Curricular: ${projectData.uc.nome}
Carga Horária: ${projectData.uc.cargaHoraria} horas
Número de Situações de Aprendizagem: ${projectData.situacoes.length}
Professor Responsável: ${projectData.professor}
Unidade: ${projectData.unidade}

================================================================

2. FUNÇÃO DA UNIDADE CURRICULAR

${projectData.uc.funcao}

================================================================

3. OBJETIVOS GERAIS

${projectData.uc.objetivos}

================================================================

4. COMPETÊNCIAS E CAPACIDADES

4.1 CAPACIDADES TÉCNICAS (ESSENCIAIS)
${projectData.capacidades.tecnicas.map((cap, index) => `${index + 1}. ${cap}`).join('\n')}

4.2 CAPACIDADES BÁSICAS (COMPLEMENTARES)  
${projectData.capacidades.basicas.map((cap, index) => `${index + 1}. ${cap}`).join('\n')}

4.3 CAPACIDADES SOCIOEMOCIONAIS
${projectData.capacidades.socioemocionais.map((cap, index) => `${index + 1}. ${cap}`).join('\n')}

================================================================

5. ORGANIZAÇÃO CURRICULAR

${projectData.situacoes.map((sit, index) => `
SITUAÇÃO DE APRENDIZAGEM ${index + 1}
Título: ${sit.titulo || `SA ${sit.numero}`}
Carga Horária: ${sit.cargaHoraria} horas
Descrição: ${sit.descricao || 'A ser detalhada durante o planejamento'}
`).join('')}

================================================================

6. ESTRATÉGIAS PEDAGÓGICAS

6.1 ESTRATÉGIAS DE APRENDIZAGEM
${projectData.estrategias.aprendizagem.map(est => `• ${est}`).join('\n')}

6.2 ESTRATÉGIAS DE ENSINO
${projectData.estrategias.ensino.map(est => `• ${est}`).join('\n')}

6.3 MODALIDADES DE AULA
${projectData.estrategias.tipoAula.map(tipo => `• ${tipo}`).join('\n')}

================================================================

7. CRITÉRIOS DE AVALIAÇÃO

A avaliação será realizada de forma contínua e processual, 
considerando:

• Participação ativa nas atividades propostas
• Qualidade dos trabalhos e projetos desenvolvidos  
• Demonstração das capacidades técnicas adquiridas
• Aplicação prática dos conhecimentos
• Desenvolvimento das capacidades socioemocionais
• Trabalho em equipe e relacionamento interpessoal

================================================================

8. RECURSOS DIDÁTICOS

• Material impresso e digital
• Equipamentos e ferramentas específicas
• Laboratórios e ambientes práticos
• Recursos audiovisuais
• Plataformas digitais de apoio
• Bibliografia especializada

================================================================

9. REFERÊNCIAS BIBLIOGRÁFICAS

[A ser preenchido pelo professor com bibliografia específica 
da área e atualizações tecnológicas pertinentes]

================================================================

Documento gerado automaticamente pela Plataforma SENAI TEDs - POC
Gerado em: ${currentDate} às ${currentTime}
Aprovação Pedagógica: PENDENTE
                `;
            }
            
            return content;
        }
        
        function generateDesafioText() {
            let desafio = 'Com base nas competências e capacidades definidas para esta UC, ';
            
            if (projectData.estrategias.aprendizagem.includes('Projeto Integrador')) {
                desafio += 'desenvolva um projeto integrador que demonstre a aplicação prática dos conhecimentos adquiridos, integrando diferentes áreas do conhecimento e solucionando problemas reais do contexto profissional.';
            } else if (projectData.estrategias.aprendizagem.includes('Estudo de Caso')) {
                desafio += 'analise e resolva um estudo de caso real relacionado à área de atuação profissional, aplicando metodologias adequadas e propondo soluções viáveis e inovadoras.';
            } else if (projectData.estrategias.aprendizagem.includes('Situação-Problema')) {
                desafio += 'identifique e resolva uma situação-problema típica do contexto profissional, utilizando ferramentas apropriadas e demonstrando capacidade de análise crítica.';
            } else if (projectData.estrategias.aprendizagem.includes('Pesquisa Aplicada')) {
                desafio += 'realize uma pesquisa aplicada sobre temas relevantes da área, produzindo conhecimento que contribua para o desenvolvimento profissional e tecnológico.';
            } else {
                desafio += 'aplique os conhecimentos teóricos em situações práticas do contexto profissional, desenvolvendo soluções criativas e eficientes para desafios reais da área.';
            }
            
            return desafio;
        }
        
        function generateEtapas() {
            return `
ETAPA 1: FUNDAMENTAÇÃO TEÓRICA
• Apresentação dos conceitos fundamentais
• Estudo do referencial teórico
• Discussão sobre aplicações práticas

ETAPA 2: DESENVOLVIMENTO PRÁTICO  
• Aplicação dos conhecimentos em atividades práticas
• Desenvolvimento de projetos e exercícios
• Experimentação e teste de soluções

ETAPA 3: INTEGRAÇÃO E SÍNTESE
• Integração dos conhecimentos adquiridos
• Apresentação dos resultados obtidos
• Avaliação e reflexão sobre o aprendizado

ETAPA 4: APLICAÇÃO PROFISSIONAL
• Simulação de situações reais de trabalho
• Desenvolvimento de competências profissionais
• Preparação para inserção no mundo do trabalho
            `;
        }
        
        // Funções para visualizar documentos na própria tela
        function previewDocument(docType) {
            showDocumentViewer(docType);
        }
        
        function downloadDocument(docType) {
            showDocumentViewer(docType);
        }
        
        function showDocumentViewer(docType) {
            const content = getDocumentContent(docType);
            const title = getDocumentTitle(docType);
            
            // Criar modal para mostrar o documento
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; 
                top: 0; left: 0; 
                width: 100%; height: 100%; 
                background: rgba(0,0,0,0.8); 
                z-index: 10000; 
                display: flex; 
                align-items: center; 
                justify-content: center;
                padding: 20px;
                box-sizing: border-box;
            `;
            
            const documentContainer = document.createElement('div');
            documentContainer.style.cssText = `
                background: white; 
                border-radius: 12px; 
                max-width: 900px; 
                max-height: 90vh; 
                overflow-y: auto; 
                position: relative;
                box-shadow: 0 20px 40px rgba(0,0,0,0.3);
                width: 100%;
            `;
            
            documentContainer.innerHTML = `
                <div style="background: #FF6B35; color: white; padding: 20px; border-radius: 12px 12px 0 0; position: sticky; top: 0; z-index: 1;">
                    <h2 style="margin: 0; font-size: 1.5rem;">${title}</h2>
                    <button onclick="this.closest('.document-modal').remove()" 
                            style="position: absolute; top: 15px; right: 20px; 
                                   background: rgba(255,255,255,0.2); border: none; 
                                   color: white; font-size: 24px; cursor: pointer; 
                                   border-radius: 50%; width: 35px; height: 35px;">×</button>
                </div>
                <div style="padding: 30px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6;">
                    ${content}
                </div>
                <div style="padding: 20px; background: #f8f9fa; border-radius: 0 0 12px 12px; text-align: center;">
                    <button onclick="copyDocumentContent('${docType}')" 
                            style="background: #FF6B35; color: white; border: none; padding: 10px 20px; 
                                   border-radius: 6px; margin-right: 10px; cursor: pointer; font-weight: 600;">
                        Copiar Conteúdo
                    </button>
                    <button onclick="this.closest('.document-modal').remove()" 
                            style="background: #6c757d; color: white; border: none; padding: 10px 20px; 
                                   border-radius: 6px; cursor: pointer; font-weight: 600;">
                        Fechar
                    </button>
                </div>
            `;
            
            modal.className = 'document-modal';
            modal.appendChild(documentContainer);
            document.body.appendChild(modal);
            
            // Fechar ao clicar fora
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.remove();
                }
            });
        }
        
        function copyDocumentContent(docType) {
            const content = getDocumentContentPlain(docType);
            navigator.clipboard.writeText(content).then(() => {
                alert('Conteúdo copiado para a área de transferência!');
            }).catch(() => {
                // Fallback para browsers mais antigos
                const textArea = document.createElement('textarea');
                textArea.value = content;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                alert('Conteúdo copiado para a área de transferência!');
            });
        }
        
        function getDocumentContent(docType) {
            // Versão HTML formatada para visualização
            const content = getDocumentContentPlain(docType);
            
            // Converter texto para HTML formatado
            return content
                .replace(/\n/g, '<br>')
                .replace(/=+/g, '<hr style="border: 2px solid #FF6B35; margin: 20px 0;">')
                .replace(/^(\d+\..+)$/gm, '<h3 style="color: #FF6B35; margin-top: 25px;">$1</h3>')
                .replace(/^([A-ZÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖ\s]{3,})$/gm, '<h4 style="color: #333; margin-top: 20px; font-weight: bold;">$1</h4>')
                .replace(/^• (.+)$/gm, '<div style="margin: 5px 0; padding-left: 20px;">• $1</div>')
                .replace(/^\s*(.+:)\s*(.+)$/gm, '<div style="margin: 8px 0;"><strong>$1</strong> $2</div>');
        }
        
        function getDocumentContentPlain(docType) {
            switch(docType) {
                case 'PDF': return generatePDFContent('PDF');
                case 'SA': return generatePDFContent('SA');
                case 'PEUC': return generatePDFContent('PEUC');
                case 'Planos': return generateWordContent();
                case 'PPT': return generatePowerPointContent();
                case 'HTML': return generateHTMLContent();
                default: return 'Documento não encontrado.';
            }
        }
        
        function generateHTMLContent() {
            return `
MATERIAL INTERATIVO HTML - SENAI
${projectData.curso} - ${projectData.uc.nome}

ESTRUTURA DO CONTEÚDO DIGITAL

1. PÁGINA PRINCIPAL
   • Apresentação da UC
   • Objetivos de aprendizagem
   • Menu de navegação

2. SEÇÃO: CAPACIDADES
   • Técnicas: ${projectData.capacidades.tecnicas.length} itens
   • Básicas: ${projectData.capacidades.basicas.length} itens  
   • Socioemocionais: ${projectData.capacidades.socioemocionais.length} itens

3. SEÇÃO: SITUAÇÕES DE APRENDIZAGEM
${projectData.situacoes.map((sit, index) => `   • SA ${index + 1}: ${sit.titulo || 'Situação ' + (index + 1)}
     - Duração: ${sit.cargaHoraria} horas
     - Descrição: ${sit.descricao || 'A ser desenvolvida'}`).join('\n')}

4. SEÇÃO: ESTRATÉGIAS PEDAGÓGICAS
   • Metodologias de aprendizagem selecionadas
   • Técnicas de ensino aplicáveis
   • Recursos interativos

5. RECURSOS MULTIMÍDIA
   • Vídeos explicativos
   • Simuladores e ferramentas
   • Exercícios interativos
   • Quiz de autoavaliação

Professor: ${projectData.professor}
Unidade: ${projectData.unidade}
Gerado em: ${new Date().toLocaleDateString('pt-BR')}

OBSERVAÇÃO: Este conteúdo deve ser implementado em ambiente
web responsivo seguindo as diretrizes visuais do SENAI.
            `;
        }
        
        
        function getDocumentTitle(docType) {
            const titles = {
                'PDF': 'Material de Apoio SENAI',
                'SA': 'Situação de Aprendizagem',
                'PEUC': 'Plano de Ensino da UC',
                'Planos': 'Planos de Aula Detalhados',
                'PPT': 'Apresentação PowerPoint',
                'HTML': 'Material Interativo HTML'
            };
            return titles[docType] || 'Documento SENAI';
        }
        
        function generateWordContent() {
            return `
SENAI - SERVIÇO NACIONAL DE APRENDIZAGEM INDUSTRIAL
================================================================

PLANOS DE AULA DETALHADOS

Professor: ${projectData.professor}
Unidade: ${projectData.unidade}
Data: ${new Date().toLocaleDateString('pt-BR')}
Curso: ${projectData.curso}
UC: ${projectData.uc.nome}

================================================================

PLANO GERAL DA UNIDADE CURRICULAR

Objetivos: ${projectData.uc.objetivos}

Função: ${projectData.uc.funcao}

Carga Horária Total: ${projectData.uc.cargaHoraria} horas

================================================================

CAPACIDADES A DESENVOLVER

Capacidades Técnicas:
${projectData.capacidades.tecnicas.map(cap => `• ${cap}`).join('\n')}

Capacidades Básicas:
${projectData.capacidades.basicas.map(cap => `• ${cap}`).join('\n')}

Capacidades Socioemocionais:
${projectData.capacidades.socioemocionais.map(cap => `• ${cap}`).join('\n')}

================================================================

SITUAÇÕES DE APRENDIZAGEM PLANEJADAS

${projectData.situacoes.map((sit, index) => `
SITUAÇÃO ${index + 1}: ${sit.titulo || 'Sem título definido'}
• Carga Horária: ${sit.cargaHoraria} horas
• Tipo: ${sit.tipo}
• Descrição: ${sit.descricao || 'A ser detalhada durante o desenvolvimento'}

ESTRUTURA DA SITUAÇÃO:
- Contextualização e problematização
- Desenvolvimento das atividades práticas  
- Integração com capacidades técnicas e socioemocionais
- Avaliação contínua e processual
`).join('\n')}

================================================================

ESTRATÉGIAS PEDAGÓGICAS SELECIONADAS

Estratégias de Aprendizagem:
${projectData.estrategias.aprendizagem.map(est => `• ${est}`).join('\n')}

Estratégias de Ensino:
${projectData.estrategias.ensino.map(est => `• ${est}`).join('\n')}

Modalidades de Aula:
${projectData.estrategias.tipoAula.map(tipo => `• ${tipo}`).join('\n')}

================================================================

CRONOGRAMA SUGERIDO
(Distribuição por blocos de 4 horas - padrão SENAI-PR)

${generateCronograma()}

================================================================

RECURSOS NECESSÁRIOS

• Laboratório/ambiente adequado para práticas
• Equipamentos e ferramentas específicas da área
• Computadores com softwares apropriados
• Material didático impresso e digital
• Acesso à internet para pesquisas
• Recursos audiovisuais (projetor, som)

================================================================

CRITÉRIOS DE AVALIAÇÃO

• Participação ativa nas atividades (20%)
• Desenvolvimento de projetos práticos (40%) 
• Demonstração das capacidades técnicas (25%)
• Aplicação das capacidades socioemocionais (15%)

================================================================

OBSERVAÇÕES METODOLÓGICAS

Este plano segue rigorosamente a metodologia SENAI de situações 
de aprendizagem, priorizando:

1. Aprendizagem significativa e contextualizada
2. Desenvolvimento de competências profissionais
3. Integração teoria-prática
4. Avaliação formativa e processual
5. Protagonismo do aluno no processo de aprendizagem

================================================================

Documento gerado automaticamente pela Plataforma SENAI TEDs - POC
Gerado em: ${new Date().toLocaleDateString('pt-BR')} às ${new Date().toLocaleTimeString('pt-BR')}
Status: DRAFT - Aguardando validação pedagógica
            `;
        }
        
        function generateCronograma() {
            let cronograma = '';
            let aulasAcumuladas = 0;
            
            projectData.situacoes.forEach((sit, index) => {
                const numeroAulas = Math.ceil(sit.cargaHoraria / 4);
                cronograma += `
SITUAÇÃO ${index + 1} - ${sit.titulo || 'SA' + (index + 1)}
Aulas ${aulasAcumuladas + 1} a ${aulasAcumuladas + numeroAulas} (${sit.cargaHoraria}h)
• Estratégias: ${projectData.estrategias.aprendizagem.join(', ')}
• Modalidade: ${projectData.estrategias.tipoAula.join(', ')}
                `;
                aulasAcumuladas += numeroAulas;
            });
            
            return cronograma;
        }
        
        function generatePowerPointContent() {
            return `
ROTEIRO DE APRESENTAÇÃO POWERPOINT
SENAI - ${projectData.curso}
${projectData.uc.nome}

================================================================

SLIDE 1: CAPA
• Título: ${projectData.uc.nome}
• Curso: ${projectData.curso}  
• Professor: ${projectData.professor}
• SENAI ${projectData.unidade}

================================================================

SLIDE 2: OBJETIVOS DA UC
• ${projectData.uc.objetivos}

================================================================

SLIDE 3: FUNÇÃO DA UC
• ${projectData.uc.funcao}

================================================================

SLIDE 4: CAPACIDADES TÉCNICAS
${projectData.capacidades.tecnicas.map(cap => `• ${cap}`).join('\n')}

================================================================

SLIDE 5: CAPACIDADES BÁSICAS E SOCIOEMOCIONAIS
BÁSICAS:
${projectData.capacidades.basicas.map(cap => `• ${cap}`).join('\n')}

SOCIOEMOCIONAIS:
${projectData.capacidades.socioemocionais.map(cap => `• ${cap}`).join('\n')}

================================================================

SLIDE 6: SITUAÇÕES DE APRENDIZAGEM
${projectData.situacoes.map((sit, index) => `
• SA ${index + 1}: ${sit.titulo || 'Situação ' + (index + 1)}
  - ${sit.cargaHoraria} horas
  - ${sit.descricao || 'Descrição a ser detalhada'}
`).join('')}

================================================================

SLIDE 7: ESTRATÉGIAS PEDAGÓGICAS
APRENDIZAGEM:
${projectData.estrategias.aprendizagem.map(est => `• ${est}`).join('\n')}

ENSINO:
${projectData.estrategias.ensino.map(est => `• ${est}`).join('\n')}

================================================================

SLIDE 8: CRONOGRAMA GERAL
• Carga Horária Total: ${projectData.uc.cargaHoraria} horas
• Número de Situações: ${projectData.situacoes.length}
• Distribuição em blocos de 4 horas

================================================================

SLIDE 9: AVALIAÇÃO
• Avaliação contínua e processual
• Foco nas capacidades desenvolvidas
• Instrumentos variados de avaliação
• Feedback constante aos alunos

================================================================

SLIDE 10: RECURSOS E MATERIAIS
• Ambiente prático adequado
• Equipamentos e ferramentas específicas  
• Material didático atualizado
• Recursos tecnológicos

================================================================

OBSERVAÇÕES PARA O PROFESSOR:
- Adapte os slides conforme necessário
- Inclua exemplos práticos da área
- Use recursos visuais e interativos
- Mantenha foco na metodologia SENAI

Apresentação gerada automaticamente - Plataforma SENAI TEDs POC
            `;
        }
        
        function generateHTMLPage() {
            const htmlContent = `
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${projectData.uc.nome} - SENAI</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 8px; }
        .header { background: #FF6B35; color: white; padding: 20px; margin: -30px -30px 30px -30px; }
        .section { margin-bottom: 30px; }
        .capacidade { background: #f8f9fa; padding: 10px; margin: 5px 0; border-left: 4px solid #FF6B35; }
        .situacao { border: 1px solid #ddd; padding: 15px; margin: 10px 0; border-radius: 5px; }
        ul { padding-left: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>SENAI - Material Digital Interativo</h1>
            <h2>${projectData.curso}</h2>
            <h3>${projectData.uc.nome}</h3>
        </div>
        
        <div class="section">
            <h3>📋 Informações Gerais</h3>
            <p><strong>Professor:</strong> ${projectData.professor}</p>
            <p><strong>Unidade:</strong> ${projectData.unidade}</p>
            <p><strong>Carga Horária:</strong> ${projectData.uc.cargaHoraria} horas</p>
        </div>
        
        <div class="section">
            <h3>🎯 Objetivos da UC</h3>
            <p>${projectData.uc.objetivos}</p>
        </div>
        
        <div class="section">
            <h3>💪 Capacidades a Desenvolver</h3>
            
            <h4>Capacidades Técnicas:</h4>
            ${projectData.capacidades.tecnicas.map(cap => `<div class="capacidade">${cap}</div>`).join('')}
            
            <h4>Capacidades Básicas:</h4>
            ${projectData.capacidades.basicas.map(cap => `<div class="capacidade">${cap}</div>`).join('')}
            
            <h4>Capacidades Socioemocionais:</h4>
            ${projectData.capacidades.socioemocionais.map(cap => `<div class="capacidade">${cap}</div>`).join('')}
        </div>
        
        <div class="section">
            <h3>📚 Situações de Aprendizagem</h3>
            ${projectData.situacoes.map((sit, index) => `
                <div class="situacao">
                    <h4>Situação ${index + 1}: ${sit.titulo || 'Sem título'}</h4>
                    <p><strong>Carga Horária:</strong> ${sit.cargaHoraria} horas</p>
                    <p><strong>Descrição:</strong> ${sit.descricao || 'Não informada'}</p>
                </div>
            `).join('')}
        </div>
        
        <div class="section">
            <h3>🎲 Estratégias Pedagógicas</h3>
            
            <h4>Estratégias de Aprendizagem:</h4>
            <ul>
                ${projectData.estrategias.aprendizagem.map(est => `<li>${est}</li>`).join('')}
            </ul>
            
            <h4>Estratégias de Ensino:</h4>
            <ul>
                ${projectData.estrategias.ensino.map(est => `<li>${est}</li>`).join('')}
            </ul>
        </div>
        
        <footer style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd; text-align: center; color: #666;">
            <p>Documento gerado automaticamente pela Plataforma SENAI TEDs - POC</p>
            <p>Gerado em: ${new Date().toLocaleDateString('pt-BR')} às ${new Date().toLocaleTimeString('pt-BR')}</p>
        </footer>
    </div>
</body>
</html>
            `;
            
            downloadTextAsFile('Material_Interativo_SENAI.html', htmlContent, 'text/html');
        }
        
        function downloadTextAsFile(filename, text, mimeType) {
            const element = document.createElement('a');
            element.setAttribute('href', `data:${mimeType};charset=utf-8,` + encodeURIComponent(text));
            element.setAttribute('download', filename);
            element.style.display = 'none';
            document.body.appendChild(element);
            element.click();
            document.body.removeChild(element);
        }

        function restartProcess() {
            if(confirm('Deseja iniciar um novo processo? Todos os dados atuais serão perdidos.')) {
                location.reload();
            }
        }

        function sendForApproval() {
            alert('✅ Documentos enviados para validação pedagógica!\n\nO orientador pedagógico será notificado por e-mail e você receberá feedback em até 48 horas.');
        }

        // Inicializar na tela de curso (simulando login já feito)
        document.addEventListener('DOMContentLoaded', function() {
            showStep(2);
        });
    </script>
</body>
</html>
